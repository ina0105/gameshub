<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your very own crossword</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      max-width: 1200px;
      margin-top: 20px;
    }
    
    h1 {
      color: #2c3e50;
      text-align: center;
      margin-bottom: 10px;
      animation: bounce 1s ease infinite;
    }
    
    .crossword {
      border: 2px solid #3498db;
      border-radius: 10px;
      padding: 10px;
      background-color: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(22, 30px);
      grid-template-rows: repeat(22, 30px);
      gap: 1px;
    }
    
    .cell {
      width: 30px;
      height: 30px;
      border: 1px solid #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      background-color: white;
    }
    
    .cell.filled {
      background-color: #333;
    }
    
    .cell-number {
      position: absolute;
      top: 1px;
      left: 2px;
      font-size: 9px;
      color: #555;
    }
    
    input {
      width: 100%;
      height: 100%;
      border: none;
      text-align: center;
      font-size: 18px;
      text-transform: uppercase;
      background: transparent;
      color: #2980b9;
      font-weight: bold;
    }
    
    input:focus {
      outline: none;
      background-color: #e8f4fc;
    }
    
    input.correct {
      background-color: #d4edda;
      color: #155724;
    }
    
    .clues {
      width: 400px;
      background-color: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      max-height: 600px;
      overflow-y: auto;
    }
    
    .clue-section h3 {
      color: #3498db;
      border-bottom: 2px solid #3498db;
      padding-bottom: 5px;
    }
    
    .clue-item {
      margin-bottom: 8px;
      cursor: pointer;
      padding: 5px;
      border-radius: 5px;
      display: flex;
    }
    
    .clue-item:hover {
      background-color: #f0f0f0;
    }
    
    .clue-item.active {
      background-color: #e3f2fd;
    }
    
    .clue-number {
      font-weight: bold;
      margin-right: 10px;
      color: #2980b9;
      min-width: 25px;
    }
    
    .buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    button {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      background-color: #3498db;
      color: white;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
    }
    
    button:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
    }
    
    #check-btn {
      background-color: #2ecc71;
    }
    
    #check-btn:hover {
      background-color: #27ae60;
    }
    
    #reveal-btn {
      background-color: #e74c3c;
    }
    
    #reveal-btn:hover {
      background-color: #c0392b;
    }
    
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #f00;
      border-radius: 0;
      animation: fall 5s ease-out;
      z-index: 999;
    }
    
    @keyframes fall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
    
    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
    }
    
    .celebration {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(0,0,0,0.7);
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s;
    }
    
    .celebration.show {
      opacity: 1;
      pointer-events: all;
    }
    
    .celebration-content {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      animation: pop 0.5s;
    }
    
    @keyframes pop {
      0% {
        transform: scale(0.5);
      }
      80% {
        transform: scale(1.1);
      }
      100% {
        transform: scale(1);
      }
    }
    
    .celebration h2 {
      color: #e74c3c;
      margin-bottom: 20px;
    }
    
    .progress-container {
      width: 100%;
      height: 20px;
      background-color: #f1f1f1;
      border-radius: 10px;
      margin-top: 20px;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(to right, #3498db, #2ecc71);
      width: 0%;
      transition: width 0.3s;
      border-radius: 10px;
    }
    
    @media (max-width: 900px) {
      .container {
        flex-direction: column;
      }
      
      .grid {
        grid-template-columns: repeat(22, 20px);
        grid-template-rows: repeat(22, 20px);
      }
      
      .cell {
        width: 20px;
        height: 20px;
      }
      
      input {
        font-size: 12px;
      }
      
      .clues {
        width: 90%;
      }
    }
  </style>
</head>
<body>
  <h1>Personal Crossword Puzzle</h1>
  <div class="progress-container">
    <div class="progress-bar" id="progress"></div>
  </div>
  
  <div class="container">
    <div class="crossword">
      <div class="grid" id="crossword-grid"></div>
    </div>
    
    <div class="clues">
      <div class="clue-section">
        <h3>Across</h3>
        <div id="across-clues"></div>
      </div>
      <div class="clue-section">
        <h3>Down</h3>
        <div id="down-clues"></div>
      </div>
    </div>
  </div>
  
  <div class="buttons">
    <button id="check-btn">Check Answers</button>
    <button id="reveal-btn">Reveal Solution</button>
    <button id="reset-btn">Reset Puzzle</button>
  </div>
  
  <div class="celebration" id="celebration">
    <div class="celebration-content">
      <h2>Congratulations! ðŸŽ‰</h2>
      <p>You've completed the personal crossword puzzle!</p>
      <button id="close-celebration">Continue</button>
    </div>
  </div>

  <script>
    // Display celebration and confetti on page load
    window.addEventListener('DOMContentLoaded', () => {
      createConfetti();
      setTimeout(() => {
        document.getElementById('celebration').classList.add('show');
      }, 500);
    });
    
    document.getElementById('close-celebration').addEventListener('click', () => {
      document.getElementById('celebration').classList.remove('show');
    });
    
    // Crossword definition
    const crosswordData = {
      grid: [
        [null, null, "S", null, null, null, "L", null, null, null, null, null, null, "R", null, null, null, null, null],
        [null, null, "U", null, "G", "H", "O", "S", "T", "I", "N", "G", null, "A", null, null, null, null, null],
        [null, null, "R", null, null, null, "R", null, null, null, null, null, null, "P", "E", "R", "F", "E", null],
        [null, "W", "E", "S", "A", "N", "D", "E", "R", "S", "O", "N", null, "U", null, null, null, null, null],
        [null, null, "B", null, null, null, "O", null, null, null, null, null, null, "N", null, null, null, null, null],
        [null, null, "U", null, null, null, "F", null, null, null, null, null, null, "Z", null, null, null, null, null],
        [null, null, "D", null, null, null, "T", null, null, null, null, null, null, "E", null, null, null, null, null],
        [null, null, "D", null, "J", "O", "H", "N", "N", "Y", "E", "N", "G", "L", "I", "S", "H", null, null],
        [null, null, "Y", null, null, null, "E", null, null, null, null, null, null, null, null, null, null, null, null],
        [null, null, null, null, null, null, "R", null, null, null, null, null, null, "T", null, null, null, null, null],
        [null, null, null, null, null, "C", "I", "N", "E", "M", "A", "P", "A", "R", "A", "D", "I", "S", "O"],
        [null, null, null, null, null, null, "N", null, null, null, null, null, null, "U", null, null, "Z", null, null],
        [null, null, null, "P", "I", "N", "G", "U", "I", "N", null, null, null, "F", null, null, "I", null, null],
        [null, "I", "N", "A", null, null, "S", null, null, null, null, null, null, "F", null, null, "P", null, null],
        [null, null, null, "Z", null, null, null, null, "C", null, null, null, null, "L", "U", "C", "I", "J", "A"],
        [null, null, null, "I", null, null, null, null, "A", null, null, null, null, "E", null, null, "Z", null, null],
        [null, null, null, null, null, null,"W", "E", "T", "D", "R", "E", "A", "M", "S" null, "I", null, null],
        [null, null, null, null, "M", null, null, null, "S", null, null, null, null, "A", null, null, null, null, null],
        ["H", "U", "R", "K", "A", "C", "Z", null, "B", null, "P", null, null, "Y", null, null, null, null, null],
        [null, null, null, null, "Y", null, null, null, "A", null, "I", null, null, "O", null, null, null, null, null],
        [null, null, null, null, "B", "U", "Z", "Z", "C", "U", "T", null, null, null, null, null, null, null, null],
        [null, "P", "E", "P", "E", null, null, null, "K", null, "A", null, null, null, null, null, null, null, null]
      ],
      
      clues: {
        across: {
          4: "What is your stupid stress coping mechanism",
          5: "My actual favorite sweet treat (do 11 first)",
          6: "Who is my favorite director",
          7: "What was the first movie we watched together",
          9: "What I think is your favorite movie",
          11: "My favorite sweet treat",
          12: "Who was the initial rizzler",
          14: "What is the name of my friend from Croatia that is a data scientist",
          15: "The song with which I told you I was a V",
          17: "The name of the Polish player we watched in Rotterdam",
          19: "I would dye my hair blonde if you got a ____",
          20: "How does my dad call you"
        },
        down: {
          1: "What you tell me when you don't agree with smth but you can't say it",
          2: "What you say is your favorite movie, but its not really a movie",
          3: "What was the first cartoon we watched together",
          8: "What was the first thing I had to eat bc of you",
          10: "What is the name of the sunglasses brand everybody in Croatia wears",
          11: "What was the first Croatian word you learned",
          13: "Where was our first date",
          16: "What you say when I ask you to come to Ams a day earlier(and you will not)",
          18: "What is the name of the food you would get in a bakery in Novalja"
        }
      },
      
      answers: {
        across: {
          4: "GHOSTING",
          5: "PERFE",
          6: "WESANDERSON",
          7: "JOHNNYENGLISH",
          9: "CINEMAPARADISO",
          11: "PENGUIN",
          12: "INA",
          14: "LUCIJA",
          15: "WETDREAMS",
          17: "HURKACZ",
          19: "BUZZCUT",
          20: "PEPE"
        },
        down: {
          1: "SUREBUDDY",
          2: "LORDOFTHERINGS",
          3: "RAPUNZEL",
          8: "TRUFFLEMAYO",
          10: "IZIPIZI",
          11: "PAZI",
          13: "CATSBACK",
          16: "MAYBE",
          18: "PITA"
        }
      },
      
      numberedCells: {
        "3,0": 1,
        "6,0": 2,
        "0,3": 4,
        "11,0": 3,
        "0,7": 7,
        "11,9": 8,
        "0,10": 9,
        "11,14": 11,
        "8,13": 12,
        "0,13": 14,
        "6,15": 15,
        "8,17": 16,
        "0,17": 17,
        "0,19": 18,
        "8,20": 19,
        "0,20": 20
      }
    };
    
    // Initialize the grid
    function initGrid() {
      const grid = document.getElementById('crossword-grid');
      grid.innerHTML = '';
      
      for (let i = 0; i < crosswordData.grid.length; i++) {
        for (let j = 0; j < crosswordData.grid[i].length; j++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          
          if (crosswordData.grid[i][j] === null) {
            cell.classList.add('filled');
          } else {
            const input = document.createElement('input');
            input.maxLength = 1;
            input.dataset.row = i;
            input.dataset.col = j;
            input.addEventListener('keyup', handleKeyUp);
            input.addEventListener('focus', highlightWord);
            cell.appendChild(input);
            
            // Add cell numbers
            for (const pos in crosswordData.numberedCells) {
              const [col, row] = pos.split(',').map(Number);
              if (col === j && row === i) {
                const number = document.createElement('div');
                number.className = 'cell-number';
                number.textContent = crosswordData.numberedCells[pos];
                cell.appendChild(number);
              }
            }
          }
          
          grid.appendChild(cell);
        }
      }
    }
    
    // Initialize clues
    function initClues() {
      const acrossClues = document.getElementById('across-clues');
      const downClues = document.getElementById('down-clues');
      
      acrossClues.innerHTML = '';
      downClues.innerHTML = '';
      
      for (const num in crosswordData.clues.across) {
        const clueItem = document.createElement('div');
        clueItem.className = 'clue-item';
        clueItem.dataset.direction = 'across';
        clueItem.dataset.number = num;
        clueItem.innerHTML = `<span class="clue-number">${num}.</span> <span class="clue-text">${crosswordData.clues.across[num]}</span>`;
        clueItem.addEventListener('click', focusClue);
        acrossClues.appendChild(clueItem);
      }
      
      for (const num in crosswordData.clues.down) {
        const clueItem = document.createElement('div');
        clueItem.className = 'clue-item';
        clueItem.dataset.direction = 'down';
        clueItem.dataset.number = num;
        clueItem.innerHTML = `<span class="clue-number">${num}.</span> <span class="clue-text">${crosswordData.clues.down[num]}</span>`;
        clueItem.addEventListener('click', focusClue);
        downClues.appendChild(clueItem);
      }
    }
    
    // Handle keyboard navigation
    function handleKeyUp(e) {
      const row = parseInt(e.target.dataset.row);
      const col = parseInt(e.target.dataset.col);
      
      if (e.key === 'ArrowRight') {
        moveFocus(row, col + 1);
      } else if (e.key === 'ArrowLeft') {
        moveFocus(row, col - 1);
      } else if (e.key === 'ArrowUp') {
        moveFocus(row - 1, col);
      } else if (e.key === 'ArrowDown') {
        moveFocus(row + 1, col);
      } else if (/^[a-zA-Z]$/.test(e.key)) {
        e.target.value = e.key.toUpperCase();
        const nextCell = findNextCell(row, col);
        if (nextCell) {
          nextCell.focus();
        }
        updateProgress();
      } else if (e.key === 'Backspace' || e.key === 'Delete') {
        e.target.value = '';
        updateProgress();
      }
    }
    
    // Find next empty cell in current word
    function findNextCell(row, col) {
      // Try right first
      let nextInput = getInputAt(row, col + 1);
      if (nextInput) return nextInput;
      
      // Try down
      nextInput = getInputAt(row + 1, col);
      if (nextInput) return nextInput;
      
      return null;
    }
    
    // Move focus to specified cell
    function moveFocus(row, col) {
      const input = getInputAt(row, col);
      if (input) {
        input.focus();
      }
    }
    
    // Get input element at specified position
    function getInputAt(row, col) {
      if (row < 0 || row >= crosswordData.grid.length || col < 0 || col >= crosswordData.grid[0].length) {
        return null;
      }
      
      if (crosswordData.grid[row][col] === null) {
        return null;
      }
      
      const input = document.querySelector(`input[data-row="${row}"][data-col="${col}"]`);
      return input;
    }
    
    // Highlight word when cell is focused
    function highlightWord(e) {
      clearHighlights();
      
      const row = parseInt(e.target.dataset.row);
      const col = parseInt(e.target.dataset.col);
      
      // Determine if cell is part of across word
      let acrossWord = false;
      let acrossStart = col;
      while (acrossStart > 0 && crosswordData.grid[row][acrossStart - 1] !== null) {
        acrossStart--;
      }
      
      let acrossEnd = col;
      while (acrossEnd < crosswordData.grid[row].length - 1 && crosswordData.grid[row][acrossEnd + 1] !== null) {
        acrossEnd++;
      }
      
      if (acrossEnd > acrossStart) {
        acrossWord = true;
        for (let i = acrossStart; i <= acrossEnd; i++) {
          const input = getInputAt(row, i);
          if (input) {
            input.parentElement.style.backgroundColor = '#e3f2fd';
          }
        }
      }
      
      // Determine if cell is part of down word
      let downWord = false;
      let downStart = row;
      while (downStart > 0 && crosswordData.grid[downStart - 1][col] !== null) {
        downStart--;
      }
      
      let downEnd = row;
      while (downEnd < crosswordData.grid.length - 1 && crosswordData.grid[downEnd + 1][col] !== null) {
        downEnd++;
      }
      
      if (downEnd > downStart) {
        downWord = true;
        for (let i = downStart; i <= downEnd; i++) {
          const input = getInputAt(i, col);
          if (input) {
            input.parentElement.style.backgroundColor = '#e3f2fd';
          }
        }
      }
      
      // Highlight active clue
      const clueItems = document.querySelectorAll('.clue-item');
      clueItems.forEach(item => item.classList.remove('active'));
      
      if (acrossWord || downWord) {
        // Find the clue number for this cell
        let clueNumber = null;
        
        for (const pos in crosswordData.numberedCells) {
          const [numCol, numRow] = pos.split(',').map(Number);
          if ((acrossWord && numRow === row && numCol <= col && col <= acrossEnd) ||
              (downWord && numCol === col && numRow <= row && row <= downEnd)) {
            clueNumber = crosswordData.numberedCells[pos];
            break;
          }
        }
        
        if (clueNumber) {
          const direction = acrossWord ? 'across' : 'down';
          const activeClue = document.querySelector(`.clue-item[data-direction="${direction}"][data-number="${clueNumber}"]`);
          if (activeClue) {
            activeClue.classList.add('active');
            activeClue.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          }
        }
      }
    }
    
    // Focus on a clue's first cell
    function focusClue(e) {
      const direction = e.currentTarget.dataset.direction;
      const number = e.currentTarget.dataset.number;
      
      // Find the cell with this clue number
      for (const pos in crosswordData.numberedCells) {
        const [col, row] = pos.split(',').map(Number);
        if (crosswordData.numberedCells[pos] == number) {
          const input = getInputAt(row, col);
          if (input) {
            input.focus();
            break;
          }
        }
      }
      
      // Highlight the clue
      const clueItems = document.querySelectorAll('.clue-item');
      clueItems.forEach(item => item.classList.remove('active'));
      e.currentTarget.classList.add('active');
    }
    
    // Clear all highlights
    function clearHighlights() {
      const cells = document.querySelectorAll('.cell');
      cells.forEach(cell => {
        if (!cell.classList.contains('filled')) {
          cell.style.backgroundColor = '';
        }
      });
      
      const clueItems = document.querySelectorAll('.clue-item');
      clueItems.forEach(item => item.classList.remove('active'));
    }
    
    // Check answers
    function checkAnswers() {
      let allCorrect = true;
      const inputs = document.querySelectorAll('input');
      
      inputs.forEach(input => {
        const row = parseInt(input.dataset.row);
        const col = parseInt(input.dataset.col);
        const correctLetter = crosswordData.grid[row][col];
        
        if (input.value.toUpperCase() === correctLetter) {
          input.classList.add('correct');
        } else {
          input.classList.remove('correct');
          allCorrect = false;
        }
      });
      
      if (allCorrect) {
        celebrate();
      }
      
      return allCorrect;
    }
    
    // Reveal solution
    function revealSolution() {
      const inputs = document.querySelectorAll('input');
      
      inputs.forEach(input => {
        const row = parseInt(input.dataset.row);
        const col = parseInt(input.dataset.col);
        const correctLetter = crosswordData.grid[row][col];
        input.value = correctLetter;
        input.classList.add('correct');
      });
      
      updateProgress();
    }
    
    // Reset puzzle
    function resetPuzzle() {
      const inputs = document.querySelectorAll('input');
      
      inputs.forEach(input => {
        input.value = '';
        input.classList.remove('correct');
      });
      
      updateProgress();
    }
    
    // Update progress bar
    function updateProgress() {
      const inputs = document.querySelectorAll('input');
      const totalCells = inputs.length;
      let filledCells = 0;
      
      inputs.forEach(input => {
        if (input.value !== '') {
          filledCells++;
        }
      });
      
      const progressPercent = (filledCells / totalCells) * 100;
      document.getElementById('progress').style.width = `${progressPercent}%`;
    }
    
    // Celebrate completion
    function celebrate() {
      createConfetti();
      document.getElementById('celebration').classList.add('show');
    }
    
    // Create confetti animation
    function createConfetti() {
      const colors = ['#e74c3c', '#3498db', '#2ecc71', '#f1c40f', '#9b59b6', '#e67e22'];
      const confettiCount = 200;
      
      for (let i = 0; i < confettiCount; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.width = `${Math.random() * 10 + 5}px`;
        confetti.style.height = `${Math.random() * 10 + 5}px`;
        confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
        confetti.style.animationDelay = `${Math.random() * 2}s`;
        
        // Different shapes
        const shape = Math.floor(Math.random() * 3);
        if (shape === 0) {
          confetti.style.borderRadius = '50%'; // Circle
        } else if (shape === 1) {
          confetti.style.borderRadius = '0'; // Square
        } else {
          // Diamond
          confetti.style.transform = 'rotate(45deg)';
          confetti.style.borderRadius = '0';
        }
        
        document.body.appendChild(confetti);
        
        // Remove confetti after animation
        setTimeout(() => {
          confetti.remove();
        }, 5000);
      }
    }
    
    // Event listeners
    document.getElementById('check-btn').addEventListener('click', checkAnswers);
    document.getElementById('reveal-btn').addEventListener('click', revealSolution);
    document.getElementById('reset-btn').addEventListener('click', resetPuzzle);
    document.getElementById('close-celebration').addEventListener('click', () => {
      document.getElementById('celebration').classList.remove('show');
    });
    
    // Initialize
    initGrid();
    initClues();
    updateProgress();
  </script>
</body>
</html>
